<html>
    <head>
        <title>Color! - Baileo</title>
        <link rel='stylesheet' href='style.css'>
        <script src='main.js'></script>
    </head>
    <body onkeydown="keyClicked(event)">

        <div id='colorCase0' class='color-case' onclick='lockCase(0)'>
            <div id='colorLabel0' class='color-label' onclick='copyColor(this), lockCase(0)'>ED3737</div>
            <div id='colorCase0Lock' class='lock-icon-container'>
                <img class='lock-icon' src='icons/lock.png'>
            </div>

            <div class='color-display' style='background-color: #ed3737;'></div>
        </div>

        <div id='colorCase1' class='color-case' onclick='lockCase(1)'>
            <div id='colorLabel1' class='color-label' onclick='copyColor(this), lockCase(1)'>F6A84F</div>
            <div id='colorCase1Lock' class='lock-icon-container'>
                <img class='lock-icon' src='icons/lock.png'>
            </div>
            
            <div class='color-display' style='background-color: #f6a84f;'></div>
        </div>

        <div id='colorCase2' class='color-case' onclick='lockCase(2)'>
            <div id='colorLabel2' class='color-label' onclick='copyColor(this), lockCase(2)'>E9E260</div>
            <div id='colorCase2Lock' class='lock-icon-container'>
                <img class='lock-icon' src='icons/lock.png'>
            </div>
            
            <div class='color-display' style='background-color: #e9e260;'></div>
        </div>

        <div id='colorCase3' class='color-case' onclick='lockCase(3)'>
            <div id='colorLabel3' class='color-label' onclick='copyColor(this), lockCase(3)'>5EE4FB</div>
            <div id='colorCase3Lock' class='lock-icon-container'>
                <img class='lock-icon' src='icons/lock.png'>
            </div>
            
            <div class='color-display' style='background-color: #5ee4fb;'></div>
        </div>

        <div id='colorCase4' class='color-case' onclick='lockCase(4)'>
            <div id='colorLabel4' class='color-label' onclick='copyColor(this), lockCase(4)'>3C48C8</div>
            <div id='colorCase4Lock' class='lock-icon-container'>
                <img class='lock-icon' src='icons/lock.png'>
            </div>
            
            <div class='color-display' style='background-color: #3c48c8;'></div>
        </div>

        <div id='shellCounter'>Click space to begin!</div>

        <script>
            // return a promise
            function copyColor(text) {
                var textToCopy = text.innerHTML;
                text.innerHTML = 'Copied!';
                revertColorText(text, textToCopy);
                if (navigator.clipboard && window.isSecureContext) {
                    return navigator.clipboard.writeText(textToCopy);
                } else {
                    let textArea = document.createElement("textarea");
                    textArea.value = textToCopy;
                    textArea.style.position = "fixed";
                    textArea.style.left = "-999999px";
                    textArea.style.top = "-999999px";
                    document.body.appendChild(textArea);
                    textArea.focus();
                    textArea.select();
                    return new Promise((res, rej) => {
                        document.execCommand('copy') ? res() : rej();
                        textArea.remove();
                    });
                }
            }

            function revertColorText(self, oldText) {
                setTimeout(function() {
                    self.innerHTML = oldText;
                }, 500);
            }
        </script>
    </body>
</html>